<!DOCTYPE html>
<html lang="en">
	<head>
		<link href="http://gmpg.org/xfn/11" rel="profile">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta http-equiv="content-type" content="text/html; charset=utf-8">

		<!-- Enable responsiveness on mobile devices-->
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

		<title>Olin Gay - Blog</title>

        <!-- Icons -->
        <link rel="apple-touch-icon" sizes="57x57" href="http://olinbg.com/favicon/apple-touch-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="http://olinbg.com/favicon/apple-touch-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="http://olinbg.com/favicon/apple-touch-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="http://olinbg.com/favicon/apple-touch-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="http://olinbg.com/favicon/apple-touch-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="http://olinbg.com/favicon/apple-touch-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="http://olinbg.com/favicon/apple-touch-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="http://olinbg.com/favicon/apple-touch-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="http://olinbg.com/favicon/apple-touch-icon-180x180.png">
        <link rel="icon" type="image/png" href="http://olinbg.com/favicon/favicon-32x32.png" sizes="32x32">
        <link rel="icon" type="image/png" href="http://olinbg.com/favicon/android-chrome-192x192.png" sizes="192x192">
        <link rel="icon" type="image/png" href="http://olinbg.com/favicon/favicon-96x96.png" sizes="96x96">
        <link rel="icon" type="image/png" href="http://olinbg.com/favicon/favicon-16x16.png" sizes="16x16">
        <link rel="shortcut icon" href="http://olinbg.com/favicon/favicon.ico">

		<!-- CSS -->
		<link href="//fonts.googleapis.com/" rel="dns-prefetch">
		<link href="//fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic|Abril+Fatface|PT+Sans:400,400italic,700&amp;subset=latin,latin-ext" rel="stylesheet">

		<link rel="stylesheet" href="http://olinbg.com/theme/css/poole.css" />
		<link rel="stylesheet" href="http://olinbg.com/theme/css/hyde.css" />
		<link rel="stylesheet" href="http://olinbg.com/theme/css/syntax.css" />
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

		<!-- RSS -->
		<link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
	<script type="text/javascript">
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
			ga('create', 'UA-17953614-1', 'auto');
			ga('send', 'pageview');
	</script>
	</head>

	<body class="theme-base-08">
<div class="sidebar">
	<div class="container sidebar-sticky">
		<div class="sidebar-about">

			<h1>
				<a href="/">
					<img class="profile-picture" src="http://olinbg.com/images/profile.jpg">
					Olin Gay
				</a>
			</h1>
			<p class="lead"></p>
			<p class="lead">Putting it all together...<br /><br /><a href="/pages/about.html">About</a> </p>
			<p></p>
		</div>
		<nav class="sidebar-nav">
					<a class="sidebar-nav-item" href="mailto:mailto:olin@olinbg.com">
						<i class="fa fa-envelope"></i>
					</a>
					<a class="sidebar-nav-item" href="http://twitter.com/olinbg">
						<i class="fa fa-twitter"></i>
					</a>
					<a class="sidebar-nav-item" href="http://linkedin.com/in/olinbg">
						<i class="fa fa-linkedin"></i>
					</a>
					<a class="sidebar-nav-item" href="http://github.com/olinbg">
						<i class="fa fa-github"></i>
					</a>
			<a class="sidebar-nav-item" href="/feeds/all.rss.xml">
				<i class="fa fa-feed"></i>
			</a>
		</nav>
	</div>
</div>		<div class="content container">
<div class="post">
	<h1 class="post-title">Uninstall and Reinstall Bash for Windows</h1>
	<span class="post-date">Sun 31 July 2016</span>
	<p>After the most recent update for Bash for Windows, a fairly major change went into effect: you're now logged in with a "user" level account rather than "root".  This has major benefits, and works much more like any other Linux/Unix install that you'd run locally.</p>
<h2>Early Adopters Used <em>root</em>, not <em>user</em></h2>
<p>Some of the original components that I had installed under root were now not manageable by the user account - notably the Python 2.7 and 3.4 installs.  Switching back and forth to root was possible, but onerous.  Here's the command to change the default login for the Linux Sub-system (LXSS) run in PowerShell:</p>
<div class="highlight"><pre><span></span>PS C:\Windows\System32\WindowsPowerShell\v1.0&gt; lxrun
Performs administrative operations on the LX subsystem

...
    /setdefaultuser - Configures the subsystem user that bash will be launched as. If the user does not exist it will be created.
        Optional arguments:
            username - Supply the username
</pre></div>


<p>This didn't seem sustainable long-term, and I preferred to start "fresh" with a user-mode Ubuntu image from the start.  So I did some digging on uninstalling and reinstalling the LXSS.</p>
<h2>Uninstalling Bash for Windows</h2>
<p>First some links:</p>
<p>The initial GitHub issue: <a href="https://github.com/Microsoft/BashOnWindows/issues/4">Reinstalling clean image #4</a>
The Lxss command reference: <a href="https://msdn.microsoft.com/en-us/commandline/wsl/reference?f=255&amp;MSPPError=-2147217396">Command Reference</a>
User support documentation within Bash for Windows: <a href="https://msdn.microsoft.com/en-us/commandline/wsl/user_support">User Support</a></p>
<p>After reviewing, the key commands to execute were first to uninstall completely (instead of just removing the user install), and then reinstalling.</p>
<p>First, the uninstall:</p>
<div class="highlight"><pre><span></span>PS C:\Windows\System32\WindowsPowerShell\v1.0&gt; lxrun /uninstall /full
This will uninstall Ubuntu on Windows.
This will remove the Ubuntu environment as well as any modifications, new applications, and user data.
Type &quot;y&quot; to continue: y
Uninstalling...
</pre></div>


<p>You can confirm the directory has been removed by trying to open the path <code>%USERPROFILE%\AppData\Local\Lxss</code> - it should fail.</p>
<h2>Re-installing Bash for Windows</h2>
<p>The reinstall was very simple - simply run a similar Lxss command:</p>
<div class="highlight"><pre><span></span>PS C:\Windows\System32\WindowsPowerShell\v1.0&gt; lxrun /install
-- Beta feature --
This will install Ubuntu on Windows, distributed by Canonical
and licensed under its terms available here:
https://aka.ms/uowterms

Type &quot;y&quot; to continue: y
Downloading from the Windows Store... 100%
Extracting filesystem, this will take a few minutes...
Please create a default UNIX user account. The username does not need to match your Windows username.
For more information visit: https://aka.ms/wslusers
Enter new UNIX username: &lt;user&gt;
Enter new UNIX password:
Retype new UNIX password:
passwd: password updated successfully
Installation successful!
PS C:\Windows\System32\WindowsPowerShell\v1.0&gt;
</pre></div>


<p>In my case, most files were mounted in a C: folder, so I just need to reconfigure Python and other installs.  To see those steps, check out <a href="http://olinbg.com/posts/pelican-python-bash.html">this post</a>.</p>
<span><em>Want to discuss?  Reach out to me on <a href="mailto:olin@olinbg.com">email</a> or <a href="http://twitter.com/olinbg">Twitter</a>.</em></span></div>
		</div>
	</body>
</html>